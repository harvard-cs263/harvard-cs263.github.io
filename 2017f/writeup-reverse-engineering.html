<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta charset="utf-8"/>
<meta name="generator" content="Docutils 0.13.1: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/******************************************************************************
The MIT License (MIT)

Copyright (c) 2014 Matthias Eisen

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
******************************************************************************/

/* Modified by Jerry Ma */

body {
    font-family: Palatino, "Palatino LT STD", "Palatino Linotype", "Book Antiqua", Georgia, serif;
    font-size: 16px;
    color: #24292e;
}

div.document {
    margin: 0 auto;
    width: 95%;
    max-width: 960px;
}

p {
    line-height: 120%;
}


/* ========== Headings ========== */

h1, h2, h3, h4, h5, h6 {
    font-weight: normal;
    margin-top: 1.5em;
}

h1.section-subtitle, 
h2.section-subtitle, 
h3.section-subtitle,
h4.section-subtitle, 
h5.section-subtitle, 
h6.section-subtitle {
    margin-top: 0.4em;
}

h1.title {
    text-align: center;
}

h2.subtitle {
    text-align: center;
}

span.section-subtitle {
    font-size: 80%,
}

/* //-------- Headings ---------- */


/* ========== Images ========== */

img, 
.figure, 
object {
    display:        block;
    margin-left:    auto;
    margin-right:   auto;
}

div.figure {
    margin-left:    2em;
    margin-right:   2em;
}

img.align-left, .figure.align-left, object.align-left {
    clear:          left;
    float:          left;
    margin-right:   1em;
}

img.align-right, .figure.align-right, object.align-right {
    clear:          right;
    float:          right;
    margin-left:    1em;
}

img.align-center, .figure.align-center, object.align-center {
    display:        block;
    margin-left:    auto;
    margin-right:   auto;
}

/* reset inner alignment in figures */
div.align-right {
    text-align: inherit;
}

object[type="image/svg+xml"], 
object[type="application/x-shockwave-flash"] {
    overflow: hidden;
}

/* //-------- Images ---------- */



/* ========== Literal Blocks ========== */

pre, tt.literal, span.literal {
    font-family: "Lucida Sans Typewriter", "Lucida Console", Monaco, "Bitstream Vera Sans Mono", monospace;
    font-size: 14px;
}

tt.literal {
    background-color: #ffa;
}

span.literal {
    background-color: #f3f3f4;
    border-radius: 0.3em;
    padding-left: 0.3em;
    padding-right: 0.3em;
    white-space: pre;
}

pre.address {
    margin-bottom: 0;
    margin-top: 0;
    font: inherit;
}

pre.literal-block {
    border-left: solid 5px #ccc;
    background-color: #f6f8fa;
    padding: 1em;
}

pre.literal-block, pre.doctest-block, pre.math, pre.code {
}

span.interpreted {
}

span.pre {
    white-space: pre;
}

pre.code .ln { 
    color: grey; 
}
pre.code, code {
    border-style: none;
    padding: 1em 0;
}
pre.code .comment, code .comment { 
    color: #888;
}
pre.code .keyword, code .keyword {
    font-weight: bold; 
    color: #080;
}
pre.code .literal.string, code .literal.string { 
    color: #d20;
    background-color: #fff0f0;
}
pre.code .literal.number, code .literal.number { 
    color: #00d;
}
pre.code .name.builtin, code .name.builtin {
    color: #038;
    color: #820;
}
pre.code .name.namespace, code .name.namespace {
    color: #b06;
}
pre.code .deleted, code .deleted {
    background-color: #fdd;
}
pre.code .inserted, code .inserted {
    background-color: #dfd;
}


/* //-------- Literal Blocks --------- */


/* ========== Tables ========== */

table {
    border-spacing:         0;
    border-collapse:        collapse;
    border-style:           none;
    border-top:             solid 1px #111;
    border-bottom:          solid 1px #111;
}

td, 
th {
    border: none;
    padding-left: 0.8em;
    padding-right: 0.8em;
    vertical-align:         top;
}

th {
    border-top:             solid 1px #111;
    border-bottom:          solid 1px #111;
    background-color:       #ddd;
}

td p {
    margin: 0;
    padding: 0;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

table.field-list,
table.footnote,
table.citation,
table.option-list {
    border:                 none;
}
table.docinfo {
    margin:                 2em 4em;
}

table.docutils {
    margin:                 1em 0;
}

table.docutils th.field-name, 
table.docinfo th.docinfo-name {
    border:                 none;
    background:             none;
    font-weight:            bold ;
    text-align:             left ;
    white-space:            nowrap ;
    padding-left:           0;
    vertical-align:         middle; 
}

table.docutils.booktabs {
    border:                 none;
    border-top:             2px solid;
    border-bottom:          2px solid;
    border-collapse:        collapse;
}

table.docutils.booktabs * {
    border:                 0px;
}
table.docutils.booktabs th {
    border-bottom:          thin solid;
    text-align:             left;
}

span.option {
    white-space: nowrap;
}

table caption {
    margin-bottom: 2px;
}

/* //-------- Tables ---------- */


/* ========== Lists ========== */

ol.simple, ul.simple {
    margin-bottom: 1em;
}

ol.arabic {
    list-style: decimal;
}

ol.loweralpha {
    list-style: lower-alpha;
}

ol.upperalpha {
    list-style: upper-alpha;
}

ol.lowerroman {
    list-style: lower-roman;
}

ol.upperroman {
    list-style: upper-roman;
}

dl.docutils dd {
    margin-bottom: 0.5em;
}


dl.docutils dt {
    font-weight: bold;
}

li p {
    margin: 0;
    padding: 0;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

dl {
    margin: 0;
    padding: 0;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

/* //-------- Lists ---------- */


/* ========== Sidebar ========== */

div.sidebar {
    margin: 0 0 0.5em 1em ;
    border-left: solid 2px #111;
    padding: 1em ;
    width: 40% ;
    float: right ;
    clear: right;
}

div.sidebar {
    font-size: 14px;
}

p.sidebar-title {
    font-size: 16px;
    font-weight: bold ;
}

p.sidebar-subtitle {
    font-weight: bold;
}

/* //-------- Sidebar ---------- */


/* ========== Topic ========== */

div.topic {
    margin: 2em;
    padding: 1em 0;
    border-width: 1px;
    border-color: #111;
    border-style: solid none;
}

div.topic p {
    padding: 0;
}

p.topic-title {
    font-weight: bold;
}

/* //-------- Topic ---------- */


/* ========== Header ========== */

div.header {
    font-family:        "Century Gothic", CenturyGothic, Geneva, AppleGothic, sans-serif;
    font-size:          14px;
    margin:             2em auto 4em auto;
    max-width:          960px;
    clear:              both;
}

hr.header {
    border:             0;
    height:             1px;
    margin-top:         1em;
    background-color:   #111;
}

/* //-------- Header ---------- */


/* ========== Footer ========== */

div.footer {
    font-family:        "Century Gothic", CenturyGothic, Geneva, AppleGothic, sans-serif;
    font-size:          14px;
    margin:             6em auto 2em auto;
    max-width:          960px;
    clear:              both;
    text-align:         center;
}

hr.footer {
    border:             0;
    height:             1px;
    margin-bottom:      2em;
    background-color:   #111;
}

/* //-------- Footer ---------- */


/* ========== Admonitions ========== */

div.admonition, 
div.attention, 
div.caution, 
div.danger, 
div.error,
div.hint, 
div.important, 
div.note, 
div.tip, 
div.warning {
    margin: 2em;
    border: solid 1px #111;
    padding: 0 1em;
    background-color: #eee;
}

div.error,
div.danger {
    border-color: #a94442;
    background-color: #f2dede;
}

div.hint,
div.tip {
    border-color: #31708f;
    background-color: #d9edf7;
}

div.attention,
div.caution,
div.warning {
    border-color: #8a6d3b;
    background-color: #fcf8e3; 
}

div.hint p.admonition-title,
div.tip p.admonition-title {
    color: #31708f;
    font-weight: bold ;
}

div.note p.admonition-title,
div.admonition p.admonition-title, 
div.important p.admonition-title {
    font-weight: bold ;
}

div.attention p.admonition-title,
div.caution p.admonition-title,
div.warning p.admonition-title {
    color: #8a6d3b;
    font-weight: bold ;
}

div.danger p.admonition-title, 
div.error p.admonition-title,
.code .error {
    color: #a94442;
    font-weight: bold ;
}

/* //-------- Admonitions ---------- */


/* ========== Table of Contents ========== */

div.contents {
    margin: 2em 0;
    border: none;
}

ul.auto-toc {
    list-style-type: none;
}

a.toc-backref {
    text-decoration: none ;
    color: #111;
}

/* //-------- Table of Contents ---------- */



/* ========== Line Blocks========== */

div.line-block {
    display: block ;
    margin-top: 1em ;
    margin-bottom: 1em;
}

div.line-block div.line-block {
    margin-top: 0 ;
    margin-bottom: 0 ;
    margin-left: 1.5em;
}

/* //-------- Line Blocks---------- */


/* ========== System Messages ========== */

div.system-messages {
    margin: 5em;
}

div.system-messages h1 {
    color: red;
}

div.system-message {
    border: medium outset ;
    padding: 1em;
}

div.system-message p.system-message-title {
    color: red ;
    font-weight: bold;
}

/* //-------- System Messages---------- */


/* ========== Helpers ========== */

.hidden {
    display: none;
}

.align-left {
    text-align: left;
}

.align-center {
    clear: both ;
    text-align: center;
}

.align-right {
    text-align: right;
}

/* //-------- Helpers---------- */


p.caption {
    font-style: italic;
    text-align: center;
}

p.credits {
font-style: italic ;
font-size: smaller }

p.label {
white-space: nowrap }

p.rubric {
font-weight: bold ;
font-size: larger ;
color: maroon ;
text-align: center }

p.attribution {
text-align: right ;
margin-left: 50% }

blockquote.epigraph {
    margin: 2em 5em;
}

div.abstract {
margin: 2em 5em }

div.abstract {
font-weight: bold ;
text-align: center }

div.dedication {
margin: 2em 5em ;
text-align: center ;
font-style: italic }

div.dedication {
font-weight: bold ;
font-style: normal }


span.classifier {
font-style: oblique }

span.classifier-delimiter {
font-weight: bold }

span.problematic {
color: red }




</style>
</head>
<body>
<div class="document">


<div class="section" id="reverse-engineering">
<h1>Reverse Engineering</h1>
<p>In this project, you'll reverse engineer ChatMax 2000, a simple email server. ChatMax allows users to send each other short messages. To read and send messages, a user loads the ChatMax client page in a browser. The client page interacts with the ChatMax back-end server, which is called Proton. Proton encrypts per-user mailboxes and the authentication data that is employed to validate user requests.</p>
</div>
<div class="section" id="project-setup">
<h1>Project Setup</h1>
<ul class="simple">
<li><p>Click on the provided GitHub Classroom assignment link, login via GitHub if necessary, and click &quot;Accept assignment&quot;.</p></li>
<li><p>Wait for the repository to be created, then create a fork.</p></li>
<li><p>Enable <a class="reference external" href="https://travis-ci.com/">Travis</a> builds for the fork, and turn on &quot;Auto cancel branch builds&quot;.</p></li>
<li><p>Login to the VM.</p></li>
<li><p><span class="docutils literal">cd</span> to your home directory and run <span class="docutils literal">git clone &lt;fork_url&gt; <span class="pre">reverse-engineering/</span></span> to clone your fork.</p></li>
<li><p>Run <span class="docutils literal">cd <span class="pre">reverse-engineering/</span></span> to enter the project directory.</p></li>
<li><p>Run <span class="docutils literal">./pre_setup.sh</span> to download dependencies.</p></li>
</ul>
<p>Refer to Project 0's writeup for elaboration on any of these steps.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ChatMax binaries <strong>should</strong> work on most Linux machines; however, the course staff will only support the course VM, and you are solely responsible for making sure your code passes Travis tests.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Rejoice! Starting now, you may now use <span class="docutils literal"><span class="pre">apt-get</span></span> and related commands as you wish. For example, to install <span class="docutils literal">tmux</span>:</p>
<pre class="literal-block">sudo apt-get update
sudo apt-get install -qq tmux</pre>
</div>
</div>
<div class="section" id="specification">
<h1>Specification</h1>
<div class="admonition caution">
<p class="admonition-title">Caution!</p>
<p>For all projects, trying to modify or otherwise game the test cases will result in a grade of zero and academic dishonesty sanctions. Contact the course staff if you encounter issues with the tests.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For all projects, you may commit and push your changes at your leisure. Each push will trigger a remote test, which you can view on the <a class="reference external" href="https://travis-ci.com/">Travis</a> website.</p>
</div>
<div class="section" id="introduction">
<h2>Introduction</h2>
<p>The leaked ChatMax code and data is in the <span class="docutils literal">leaked_app/</span> directory. The leak contains the Proton binary, as well as an encrypted password file, some shared libraries used by Proton, and the web content used by the client-side ChatMax page. You will have to configure your reverse engineering environment so that Proton can find the shared libraries; in particular, you'll need to create some symbolic links that point to the leaked libraries, and you'll have to perform an <span class="docutils literal">export <span class="pre">LD_LIBRARY_PATH=&quot;$HOME&quot;/reverse-engineering/leaked_app/</span></span> command (add this to <span class="docutils literal"><span class="pre">~/.bashrc</span></span> to make your life easier) to ensure that the dynamic linker will search your current working directory for the libraries. For more information on how shared libraries work, and for examples of the necessary incantations, see <a class="reference external" href="http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html">this overview</a>.</p>
<p>Once you've set up the dynamic libraries, you can run the Proton binary using a command line like this:</p>
<pre class="literal-block">you&#64;yourMachine:~/reverse-engineering/leaked_app$ ./proton 8080 .</pre>
<p>such that you can open the client page by loading <a class="reference external" href="http://192.168.26.3:8080/home.html">http://192.168.26.3:8080/home.html</a> in a browser.</p>
<p>The Proton binary and the shared libraries were not compiled with debugging symbols enabled. This will make reverse engineering more difficult. However, you can still learn about the structure of the code using the <span class="docutils literal">readelf</span>, <span class="docutils literal">objdump</span>, <span class="docutils literal">strings</span>, and <span class="docutils literal">strace</span> tools. See the relevant class notes (available in the Canvas &quot;Files&quot; section) to get an overview of those tools.</p>
<p>You may also find it useful to employ a browser-side debugger. Those debuggers are very powerful, and have equivalents for many gdb features like breakpoints. For example, here is an <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Tools/Debugger">introduction to Firefox's built-in debugger</a>. One particularly nice feature of the debugger is its ability to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Tools/Debugger/How_to/Pretty-print_a_minified_file">pretty-print minified JavaScript code</a>.  Web developers <a class="reference external" href="https://en.wikipedia.org/wiki/Minification_(programming)">minify their JavaScript</a> to reduce its size (which makes it faster to download) and to obscure its structure (which makes it more difficult to reverse engineer).</p>
<p>If your local machine's processor supports hardware-based watchpoints, those watchpoints can be <a class="reference external" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Watchpoints.html#Set-Watchpoints">very useful for gdb debugging</a>. For example, using an <span class="docutils literal">rwatch</span> command, you can cause the program to break when a particular memory location is read. Similarly, a watch statement will inform you whenever a particular memory location is written. You can tell if your machine supports hardware-based watchpoints by issuing this command from gdb:</p>
<pre class="literal-block">(gdb) show can-use-hw-watchpoints
Debugger's willingness to use watchpoint hardware is 1.</pre>
<p>gdb can also use software-based watchpoints, but they are much slower!</p>
<p>Note that Proton detaches itself from the console and runs in the background as a daemon. So, as you run your experiments, you may need to check whether an old copy of Proton is running before starting a new one. You can run <span class="docutils literal">pkill proton</span> to kill any old copies.</p>
</div>
<div class="section" id="part-1-decrypting-the-password-database">
<h2>Part 1: Decrypting the Password Database</h2>
<p>One of the files in the leaked app looks like a password database. Unfortunately, it also looks quite encrypted. Find any necessary decryption key(s), then decrypt the password database and extract the mapping from usernames to hashed passwords. Save your decrypted password database as a file called <span class="docutils literal">decrypted_passwords.txt</span> (in the repository's root, not in <span class="docutils literal">leaked_app/</span>). This file can be in whichever format you prefer, but you will find it most helpful to represent the password hashes as hex strings.</p>
<p>In addition, answer the written questions in <span class="docutils literal">keys.txt</span> (save your answers directly in the file).</p>
<p><strong>Testing</strong>: <span class="docutils literal">make test_keys</span> will check that the correct key(s) are in <span class="docutils literal">keys.txt</span>.</p>
</div>
<div class="section" id="part-2-reverse-engineering-the-hash-function">
<h2>Part 2: Reverse Engineering the Hash Function</h2>
<p>In order to crack some passwords, we also need the hash function that Proton uses to convert a plaintext password into a hash value that is compared against a hash in the password table. Reverse engineer this hash function and implement it in <span class="docutils literal">hashpw.c</span>. In the comment at the top of the file, <strong>thoroughly</strong> describe how you reverse-engineered the hash function.</p>
<div class="admonition caution">
<p class="admonition-title">Caution!</p>
<p>Your reverse-engineered hash function should not be assembly code that is copied from Proton and called by a real C function; instead, your reverse-engineered hash function should be real, high-level C code with equivalent functionality to the assembly code in Proton.</p>
</div>
<p><strong>Compiling</strong>: Run <span class="docutils literal">make hasher</span> to compile your hash function.</p>
<p><strong>Running</strong>: Run <span class="docutils literal">./hasher 'my_string'</span> to run your hash function on the string and print the result in hex.</p>
<p><strong>Testing</strong>: Run <span class="docutils literal">make test_hasher</span> to test your hash function.</p>
</div>
<div class="section" id="part-3-writing-a-password-cracker">
<h2>Part 3: Writing a Password Cracker</h2>
<p>Using your reverse-engineered hash function, implement a password cracking function in <span class="docutils literal">crackpw.c</span> according to the specification in the file. Do not use off-the-shelf password crackers (e.g. John the Ripper)  -- instead, write your own. In the comment at the top of the file, briefly describe how your cracker works.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You may find it useful to use external text or data files. Put these files in the <span class="docutils literal">data/</span> directory so that they do not pollute the repository. In addition, please add the file to <span class="docutils literal">download_data.sh</span> so that Travis can load these files.</p>
<p>All external data dependencies must be downloaded by <span class="docutils literal">download_data.sh</span>. That is, your code should still work after running <span class="docutils literal">rm <span class="pre">-rf</span> data/* &amp;&amp; ./download_data.sh</span>.</p>
<p>Do not download more than <strong>120 MB</strong> total of data files -- Travis is limited to around 1 MB/s, so larger downloads run the risk of timing out.</p>
</div>
<p><strong>Compiling</strong>: Run <span class="docutils literal">make cracker</span> to compile your crack function.</p>
<p><strong>Running</strong>: Run <span class="docutils literal">./cracker deadbeef</span> to run your crack function (replace <span class="docutils literal">deadbeef</span> with the hex of your hash to crack).</p>
<div class="section" id="cracking-the-database">
<h3>Cracking the Database</h3>
<p>Using your cracker, find the cleartext passwords for at least 8 usernames, including the password for the root account. For each listed user, the cracker must have cracked their password in <strong>60 seconds</strong> or less (assuming single-core on a 2.6GHz Intel Xeon -- we will give you some leeway on Travis and let you go up to 120 seconds). This might seem like a tight constraint, but the passwords that some of these users have chosen are truly atrocious.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you don't feel like being a human timer (who does), the <span class="docutils literal">timeout</span> tool is for you. Running:</p>
<pre class="literal-block">timeout 60s ./cracker deadbeef</pre>
<p>will try to crack <span class="docutils literal">deadbeef</span> for 60 seconds, then terminate with a non-zero exit code if it hasn't finished by then. You can use this to write a bash script to attempt a bunch of hashes without babysitting the VM.</p>
</div>
<p>Save these username/password pairs in <span class="docutils literal"><span class="pre">plaintext-passwords-cracker.csv</span></span> (CSV format, and do <strong>not</strong> delete the pre-existing header row).</p>
<p><strong>Testing</strong>: <span class="docutils literal">make test_cracker</span> will verify that the cracked passwords in <span class="docutils literal"><span class="pre">plaintext-passwords-cracker.csv</span></span> are correct. It will then verify that the cracker can actually crack all of the users' hashes in &lt;= 60 seconds each.</p>
</div>
</div>
<div class="section" id="part-4-remote-password-cracking">
<h2>Part 4: Remote Password Cracking</h2>
<p>So far, the analysis we have done has been offline, with the assumption that we have a full leak of the app and database. In this part and the following part of this project, you will develop remote attacks against ChatMax without such an assumption.</p>
<p>Keep in mind that, like any web application, ChatMax has some quirks. For example, the client ChatMax page occasionally writes debug statements and warnings to the console log. The ChatMax page also does not automatically poll the server for new messages in a user's inbox; so, to receive new messages, you'll need to refresh the page. The Proton server is also quirky; for example, it may not handle certain kinds of messages that you think are reasonable. You'll have to work around these quirks as you reverse-engineer the system.</p>
<p>Write a remote password cracking function in <span class="docutils literal">network_cracker.py</span> according to the specification of <span class="docutils literal">crack()</span>. This function should only use network messages to the ChatMax server. In the comment at the top of the file, briefly describe how your cracker works.</p>
<div class="admonition caution">
<p class="admonition-title">Caution!</p>
<p>You may use your <span class="docutils literal">decrypted_passwords.txt</span> file as a list of usernames, but you password cracking code should <strong>not</strong> assume knowledge of the hashed passwords or the hash function that the server uses.</p>
<p>This simulates a scenario in which the ChatMax admins have forced users to select new passwords, but the ChatMax server itself runs the same code.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>As in the non-remote cracking exercise, you may use external text or data files, under the same condition of including them in <span class="docutils literal">download_data.sh</span>. In fact, here you will almost certainly need to use such files.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Although not supported by the course staff, you may use a language other than Python. See <span class="docutils literal">network_cracker.sh</span> for instructions.</p>
</div>
<p><strong>Running</strong>: After starting a proton server (say, on port 8080), run <span class="docutils literal">./network_cracker.sh some_username localhost 8080</span>, replacing <span class="docutils literal">some_username</span> with the one whose password you want to crack.</p>
<div class="section" id="cracking-passwords">
<h3>Cracking Passwords</h3>
<p>Using your network cracker, find the cleartext passwords for at least 4 usernames, including the password for the root account. For each listed user, the cracker must have cracked their password in <strong>60 seconds</strong> or less (assuming single-core on a 2.6GHz Intel Xeon -- we will give you some leeway on Travis and let you go up to 120 seconds). Again, this might seem like a tight constraint, but the passwords that some of these users have chosen are truly atrocious. As before, the <span class="docutils literal">timeout</span> command and bash scripting might be useful.</p>
<p>Save these username/password pairs in <span class="docutils literal"><span class="pre">plaintext-passwords-network-cracker.csv</span></span> (CSV format, and do <strong>not</strong> delete the pre-existing header row).</p>
<p><strong>Testing</strong>: <span class="docutils literal">make test_network_cracker</span> will verify that the cracked passwords in <span class="docutils literal"><span class="pre">plaintext-passwords-network-cracker.csv</span></span> are correct. It will then verify that the network cracker can actually crack all of the users' hashes in &lt;= 60 seconds each.</p>
</div>
</div>
<div class="section" id="part-5-remote-exfiltration">
<h2>Part 5: Remote Exfiltration</h2>
<p>Imagine that you do have the username and password for a non-root user, but you do <strong>not</strong> have the password for root; for the purposes of this exercise, use one of the non-root username/password pairs that you generated in a previous part of the project. As before, you still do not have access to either the ChatMax binaries or database.</p>
<p>Your goal is to exfiltrate the cleartext data from root's mailbox. The exfiltration attack should be launched remotely, i.e., only by sending network messages to the Proton server. &quot;Exfiltration&quot; means that the attack must be able to send the contents of root's mailbox, either to a remote server (e.g., <span class="docutils literal">upload.attacker.com</span>), or some other endpoint the attacker can access (e.g. the user's own mailbox). You may assume that <span class="docutils literal">root</span> logs in and checks their inbox regularly.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Your exfiltration attack can send more information that strictly necessary if that makes the attack easier for you. For example, you could leak more than one user's server-side mailbox, or you could leak all of the HTML in <span class="docutils literal">root</span>'s client-side ChatMax page that has been loaded within <span class="docutils literal">root</span>'s browser.</p>
</div>
<p>Describe your attack in <span class="docutils literal">exfiltration.txt</span>. Your description should be thorough enough that a typical &quot;script-kiddle&quot; (knows how to use a terminal, browser, and not much else) could execute your attack perfectly. You may create additional source code files for this attack, as long as the usage is thoroughly specified in <span class="docutils literal">exfiltration.txt</span>.</p>
<p><strong>Running</strong>/<strong>Testing</strong>: on your own.</p>
</div>
</div>
<div class="section" id="submitting">
<h1>Submitting</h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Before submitting, make sure all your work is committed and pushed to the master branch of your fork, and make sure the <a class="reference external" href="https://travis-ci.com/">Travis</a> build is passing for master. You can verify by going to your fork's GitHub page, clicking on &quot;commits&quot;, and looking for a green checkmark at the top of the list.</p>
</div>
<p>On the fork's GitHub page. click on &quot;New pull request&quot;. The base fork should be the original repository (prefixed with <span class="docutils literal"><span class="pre">harvard-cs263</span></span>), and the head fork should be your fork (prefixed with your GitHub username). Then, click on &quot;Create pull request&quot; to submit your work! The title can be whatever, and the comment can be left blank (or non-blank if you have a note for the grader).</p>
<p>If you need to edit your submission before the deadline, just commit and push your new changes to the master branch of your fork. The original pull request will be automatically updated with those commits (of course, be sure to check the GitHub pull request page to verify).</p>
<div class="admonition caution">
<p class="admonition-title">Caution!</p>
<p>Do <strong>not</strong> click &quot;Merge pull request&quot; after submitting, as this will modify the original repository. We will merge your pull request when grading.</p>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution!</p>
<p>The deadlines for all assignments are on Canvas. Deadlines are enforced to the minute (based on pull request/push times, not commit times), and the course late policy is a 10% deduction per 8 hours of lateness.</p>
<p>Note that the Travis tests can take a while, and no testing-related extensions will be granted.</p>
</div>
</div>
<div class="section" id="deliverables-and-rubric">
<h1>Deliverables and Rubric</h1>
<p>&quot;Automated&quot; grading means we will assign points based on the result of the Travis test case(s).</p>
<table>
<colgroup>
<col style="width: 68%" />
<col style="width: 11%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr><th class="head"><p>Criteria</p></th>
<th class="head"><p>Points</p></th>
<th class="head"><p>Grading method</p></th>
</tr>
</thead>
<tbody>
<tr><td><p><span class="docutils literal">keys.txt</span> (Question 1)</p></td>
<td><p>5</p></td>
<td><p>Automated</p></td>
</tr>
<tr><td><p><span class="docutils literal">keys.txt</span> (all other questions)</p></td>
<td><p>5</p></td>
<td><p>Manual</p></td>
</tr>
<tr><td><p><span class="docutils literal">decrypted_passwords.txt</span></p></td>
<td><p>5</p></td>
<td><p>Manual</p></td>
</tr>
<tr><td><p><span class="docutils literal">hashpw.c</span> (correctness)</p></td>
<td><p>7</p></td>
<td><p>Automated</p></td>
</tr>
<tr><td><p><span class="docutils literal">hashpw.c</span> (reverse engineering description)</p></td>
<td><p>8</p></td>
<td><p>Manual</p></td>
</tr>
<tr><td><p><span class="docutils literal"><span class="pre">plaintext-passwords-cracker.csv</span></span> and
<span class="docutils literal">crackpw()</span> (correctness/efficiency)</p></td>
<td><p>16</p></td>
<td><p>Automated</p></td>
</tr>
<tr><td><p><span class="docutils literal">crackpw()</span> (brief description)</p></td>
<td><p>4</p></td>
<td><p>Manual</p></td>
</tr>
<tr><td><p><span class="docutils literal"><span class="pre">plaintext-passwords-network-cracker.csv</span></span> and
<span class="docutils literal">network_cracker.py</span> (correctness/efficiency)</p></td>
<td><p>20</p></td>
<td><p>Automated</p></td>
</tr>
<tr><td><p><span class="docutils literal">network_cracker.py</span> (brief description)</p></td>
<td><p>5</p></td>
<td><p>Manual</p></td>
</tr>
<tr><td><p><span class="docutils literal">exfiltration.txt</span></p></td>
<td><p>25</p></td>
<td><p>Manual</p></td>
</tr>
</tbody>
</table>
<!-- Links follow -->
</div>
</div>
</body>
</html>
